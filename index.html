<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Flowsheets</title>
		<link rel="stylesheet" type="text/css" href="styles.css" />
	</head>
	<body>
		<div class="app">
			<!-- Sign-in -->
			<div class="view clearfix" id="view-signin">
				<h1 id="login">Login</h1>
				<form id="login-form" autocomplete="off">
					<label for="username"><b>Username</b></label>
					<input type="text" placeholder="Enter Username" name="username" required />

					<label for="password"><b>Password</b></label>
					<input type="password" placeholder="Enter Password" name="password" required />

					<button type="submit" class="btn btn-blue">Login</button>
				</form>
			</div>

			<!-- Patient Search-->
			<div class="view active" id="view-patient-search">
				<h1>Patient Search</h1>
				<div id="patient-cards-wrapper">
					<div id="patient-cards">
					</div>

				</div>
			</div>

			<!-- Patient chart -->
			<div class="view" id="view-patient-chart">
				<!-- Patient Info card -->
				<div id="patient-info">
					<div id="patient-title">
						<span id="patient-name">Last, First (MRN)</span>
						<button class="btn btn-blue" id="new-patient-btn">Change Patient</button>
					</div>

					<div>Gender: <span id="gender">Female</span></div>
					<div>DOB: <span id="dob">1/1/1901</span></div>
					<div>Age: <span id="age">123</span></div>
				</div>

				<div class="container--tabs">
					<section class="row">
						<ul class="nav nav-tabs">
							<li class="active"><a href="#tab-1">Vital Signs</a></li>
							<li class=""><a href="#tab-2">Intake & Outake</a></li>
							<li class=""><a href="#tab-3">ADL</a></li>
						</ul>
						<div class="tab-content">
							<div id="tab-1" class="tab-pane active">
								<span
									class="glyphicon glyphicon-leaf glyphicon--home--feature two columns text-center"
								></span>
								<span class="col-md-10">
									<form id="vital-sign-form" autocomplete="off">
										<div class="vital-sign-grid-row">
											<div></div>
											<div>10/2/2024</div>
											<div>10/3/2024</div>
											<div>10/4/2024</div>
											<div class="vital-sign-input">10/5/2024</div>
										</div>
										<hr style="margin: 0" />
										<div class="vital-sign-grid-row" data-vital-type="bp">
											<div class="vital-sign-label">Blood Pressure</div>
											<div id="col2">120/80</div>
											<div id="col3">120/80</div>
											<div id="col4">120/80</div>
											<div class="vital-sign-input">
												<div class="vital-input-container">
													<input id="bp-sys" name="bp-sys" size="3" maxlength="3" />
													<span>/</span>
													<input id="bp-dia" name="bp-dia" size="3" maxlength="3" />
												</div>
											</div>
										</div>
										<div class="vital-sign-grid-row" data-vital-type="temperature">
											<div class="vital-sign-label">Temperature (F)</div>
											<div>99</div>
											<div>99</div>
											<div>99</div>
											<div class="vital-sign-input">
												<div class="vital-input-container">
													<input id="temperature" name="temperature" maxlength="4" />
												</div>
											</div>
										</div>
										<div class="vital-sign-grid-row" data-vital-type="pulse">
											<div class="vital-sign-label">Heart Rate</div>
											<div></div>
											<div></div>
											<div></div>
											<div class="vital-sign-input">
												<div class="vital-input-container">
													<input id="pulse" name="pulse" maxlength="3" />
												</div>
											</div>
										</div>
										<div class="vital-sign-grid-row" data-vital-type="o2">
											<div class="vital-sign-label">Oxygen Saturation</div>
											<div></div>
											<div></div>
											<div></div>
											<div class="vital-sign-input">
												<div class="vital-input-container">
													<input id="o2" name="o2" maxlength="3" />
												</div>
											</div>
										</div>
										<div class="vital-sign-grid-row" data-vital-type="respirations">
											<div class="vital-sign-label">Respirations</div>
											<div></div>
											<div></div>
											<div></div>
											<div class="vital-sign-input">
												<div class="vital-input-container">
													<input id="respirations" name="respirations" maxlength="3" />
												</div>
											</div>
										</div>
										<div class="vital-sign-grid-row" data-vital-type="pain">
											<div class="vital-sign-label">Pain (0-10)</div>
											<div></div>
											<div></div>
											<div></div>
											<div class="vital-sign-input">
												<div class="vital-input-container">
													<input id="pain" name="pain" maxlength="2" />
												</div>
											</div>
										</div>
										<div class="vital-sign-grid-row" data-vital-type="height">
											<div class="vital-sign-label">Height</div>
											<div></div>
											<div></div>
											<div></div>
											<div class="vital-sign-input">
												<div class="vital-input-container">
													<input
														id="height-feet"
														name="height-feet"
														size="3"
														maxlength="3"
														placeholder="feet"
													/>
													<span>/</span>
													<input
														id="height-inches"
														name="height-inches"
														size="3"
														maxlength="3"
														placeholder="inches"
													/>
												</div>
											</div>
										</div>
										<div class="vital-sign-grid-row" data-vital-type="weight">
											<div class="vital-sign-label">Weight (lbs)</div>
											<div></div>
											<div></div>
											<div></div>
											<div class="vital-sign-input">
												<div class="vital-input-container">
													<input id="weight" name="weight" maxlength="3" />
												</div>
											</div>
										</div>
									</form>
								</span>
							</div>
							<div id="tab-2" class="tab-pane">
								<span
									class="glyphicon glyphicon-fire glyphicon--home--feature two columns text-center"
								></span>
								<span class="col-md-10">
									<h3>Feature 2</h3>
									<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</p>
								</span>
							</div>
							<div id="tab-3" class="tab-pane">
								<span
									class="glyphicon glyphicon-tint glyphicon--home--feature two columns text-center"
								></span>
								<span class="col-md-10">
									<h3>Feature 3</h3>
									<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</p>
								</span>
							</div>
						</div>
					</section>
				</div>
			</div>

			
			<div style="display: none">
				&#128100; &#x1F464;
				&#x1f468; &#x1f469;
	
				<img src="./img/bust-in-silhouette.svg" class="patient-img">
				<button class="btn">Button 1</button>
				<button class="btn">Button 2</button>

				<div class="container--tabs">
					<section class="row">
						<ul class="nav nav-tabs">
							<li class="active"><a href="#tab-1">Vital Signs</a></li>
							<li class=""><a href="#tab-2">Intake & Outake</a></li>
							<li class=""><a href="#tab-3">ADL</a></li>
						</ul>
						<div class="tab-content">
							<div id="tab-1" class="tab-pane active">
								<span
									class="glyphicon glyphicon-leaf glyphicon--home--feature two columns text-center"
								></span>
								<span class="col-md-10">
									<h3>Feature 1</h3>
									<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</p>
								</span>
							</div>
							<div id="tab-2" class="tab-pane">
								<span
									class="glyphicon glyphicon-fire glyphicon--home--feature two columns text-center"
								></span>
								<span class="col-md-10">
									<h3>Feature 2</h3>
									<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</p>
								</span>
							</div>
							<div id="tab-3" class="tab-pane">
								<span
									class="glyphicon glyphicon-tint glyphicon--home--feature two columns text-center"
								></span>
								<span class="col-md-10">
									<h3>Feature 3</h3>
									<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</p>
								</span>
							</div>
						</div>
					</section>
				</div>
			</div>
		</div>
		<script>
			window.addEventListener("DOMContentLoaded", function () {
				function loginSubmit(event) {
					event.preventDefault();
					showView("patient-search");
				}

				function showView(viewName) {
					const views = document.getElementsByClassName("view");
					for (let view of views) {
						if (view.id === `view-${viewName}`) {
							view.classList.add("active");
						} else {
							view.classList.remove("active");
						}
					}
				}

				function displayPatientInfo(mrn) {
					const patient = patientData.find((p) => p.mrn === mrn);
					// const patientInfoDiv = document.getElementById("patient-info");
					if (!patient) {
						// patientInfoDiv.classList.add("hidden");
						return;
					}

					showView("patient-chart");
					// document.getElementById("patient-select").selectedIndex = 0;
					document.getElementById("patient-info").classList.remove("hidden");

					const displayName = `${patient.lastName}, ${patient.firstName} (${patient.mrn})`;
					document.getElementById("patient-name").textContent = displayName;
					document.getElementById("gender").textContent = patient.gender;
					document.getElementById("dob").textContent = patient.dateOfBirth;
					document.getElementById("age").textContent = patient.age;
				}

				function buildPatientSelect() {

					// patient cards
					let patientCards = patientData.map((patient) => {
						const card = document.createElement("div");
						card.className = 'patient-card';

						const img = document.createElement("img");
						img.className = "patient-img";
						img.src = "./img/bust-in-silhouette.svg";
						card.appendChild(img);

						const name = document.createElement("div");
						name.className = "bold";
						name.appendChild(document.createTextNode(`${patient.lastName}, ${patient.firstName} (${patient.mrn})`));
						card.appendChild(name);

						const dob = document.createElement("div");
						dob.appendChild(document.createTextNode(patient.dateOfBirth));
						card.appendChild(dob);

						card.addEventListener("click", (event) => {
						displayPatientInfo(patient.mrn);
					});
						return card;
					});
					

					document.getElementById("patient-cards")
					.replaceChildren(...patientCards);
					/*
					<div class="patient-card">
						<img src="./img/bust-in-silhouette.svg" class="patient-img">
						<strong>
								<span class="patient-name">Dulinty, Maureene (6947012287)</span>
						

						</strong>
						<div class="patient-dob">12/11/1981</div>
					</div>
					*/
				}

				document.getElementById("login-form").addEventListener("submit", loginSubmit);
				buildPatientSelect();

				document.getElementById("new-patient-btn").addEventListener("click", () => {
					showView("patient-search");
					const patientInfoDiv = document.getElementById("patient-info");
					patientInfoDiv.classList.add("hidden");
				});

				// Setup validation on vital-sign inputs
				document.querySelectorAll(".vital-sign-input input").forEach((input) => {
					input.addEventListener("blur", validateVitalSign);
				});

				// store tabs variable
				var myTabs = document.querySelectorAll("ul.nav-tabs > li");
				function myTabClicks(tabClickEvent) {
					for (var i = 0; i < myTabs.length; i++) {
						myTabs[i].classList.remove("active");
					}
					var clickedTab = tabClickEvent.currentTarget;
					clickedTab.classList.add("active");
					tabClickEvent.preventDefault();
					var myContentPanes = document.querySelectorAll(".tab-pane");
					for (i = 0; i < myContentPanes.length; i++) {
						myContentPanes[i].classList.remove("active");
					}
					var anchorReference = tabClickEvent.target;
					var activePaneId = anchorReference.getAttribute("href");
					var activePane = document.querySelector(activePaneId);
					activePane.classList.add("active");
				}
				for (i = 0; i < myTabs.length; i++) {
					myTabs[i].addEventListener("click", myTabClicks);
				}
			});

			/**
	Normal Values: (red flag outside normal)
		- Temp: 97.6-99.6 
		- Pulse: 60-100
		- Resp: 12-20
		- Oxygen Saturation: >=90
		- BP: 90-150 / 50-90
				 */
			const validateVitalSign = (event) => {
				let inputId = event.target.id;
				let value = Number(event.target.value);
				if (!value) {
					event.target.classList.remove("abnormal");
					return;
				}

				let inRange = true;

				switch (inputId) {
					case "bp-sys":
						inRange = value >= 90 && value <= 150;
						break;
					case "bp-dia":
						inRange = value >= 50 && value <= 90;
						break;
					case "temperature":
						inRange = value >= 97.6 && value <= 99.6;
						break;
					case "pulse":
						inRange = value >= 60 && value <= 100;
						break;
					case "o2":
						inRange = value >= 90;
						break;
					case "respirations":
						inRange = value >= 12 && value <= 20;
						break;

					default:
						break;
				}
				if (inRange) {
					event.target.classList.remove("abnormal");
				} else {
					event.target.classList.add("abnormal");
				}
			};

			const patientData = [
				{
					firstName: "Maureene",
					lastName: "Dulinty",
					mrn: "6947012287",
					gender: "Female",
					dateOfBirth: "5/1/1946",
					age: 78,
				},
				{
					firstName: "Lindie",
					lastName: "Keepe",
					mrn: "0189267798",
					gender: "Female",
					dateOfBirth: "10/28/1933",
					age: 91,
				},
				{
					firstName: "Antonella",
					lastName: "McCurry",
					mrn: "8748056995",
					gender: "Male",
					dateOfBirth: "6/7/1949",
					age: 75,
				},
				{
					firstName: "Sayre",
					lastName: "Feaster",
					mrn: "9347946753",
					gender: "Male",
					dateOfBirth: "11/23/1936",
					age: 88,
				},
				{
					firstName: "Dina",
					lastName: "Lucas",
					mrn: "7208551979",
					gender: "Female",
					dateOfBirth: "11/6/1938",
					age: 86,
				},
				{
					firstName: "Conn",
					lastName: "Sheal",
					mrn: "4611028917",
					gender: "Male",
					dateOfBirth: "9/19/1934",
					age: 90,
				},
				{
					firstName: "Blakeley",
					lastName: "Gurney",
					mrn: "2385707373",
					gender: "Female",
					dateOfBirth: "9/22/1931",
					age: 93,
				},
				{
					firstName: "Sharla",
					lastName: "Dashwood",
					mrn: "1567391443",
					gender: "Female",
					dateOfBirth: "1/22/1958",
					age: 66,
				},
				{
					firstName: "Derk",
					lastName: "Galley",
					mrn: "5705674619",
					gender: "Male",
					dateOfBirth: "3/1/1950",
					age: 74,
				},
				{
					firstName: "Gayle",
					lastName: "Worcs",
					mrn: "2496219881",
					gender: "Female",
					dateOfBirth: "6/7/1955",
					age: 69,
				},
			];
		</script>
	</body>
</html>
